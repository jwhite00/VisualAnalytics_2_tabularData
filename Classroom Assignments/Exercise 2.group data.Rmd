<br> 
<center><img src="http://i.imgur.com/sSaOozN.png" width="500"></center>

###Jonathan White

## Course: Visual Analytics for Policy and Management

### Prof. Jos√© Manuel Magallanes, PhD 

_____


# Class Exercise 2
### Univariate Case

_____

Contents:

1. [Intro.](#intro)

2. [Loliplot.](#part1) 

3. [Data Processes.](#part3)

    3.1 [Classification.](#part31)
    * [Nominal Data.](#part311)
    * [Ordinal Data.](#part312)
    
    3.2 [Counting.](#part32)
    
    3.3 [Measurement.](#part33) 
    

__________



##############################INTRO: Loading and Prepping Data  #############################
<a id='intro'></a>


```{r}
#Loading the Data

link = "https://raw.githubusercontent.com/jwhite00/VisualAnalytics_2_tabularData/master/data/Link%20Data.csv"

mydata=read.csv(link)


```


```{r ggplot_call, warning=FALSE}
#loading ggplot2 and scales plugins
library(ggplot2)
library(scales)

```




#Reminder of Data

```{r column_Names, eval=FALSE}
#list of the 24 columns

names(mydata) 
```


#Data Prep from Exercise 1 Carried Over


```{r freqTab_abs, eval=FALSE}



# as a percentage of total
absoluteT=table(mydata$access_mode,exclude = '#NULL!')
ToPlot=prop.table(absoluteT)

#Labels for coding
names(ToPlot)[1]='Walking/Wheelchair'
names(ToPlot)[2]='Dropped off'
names(ToPlot)[3]='Drove alone'
names(ToPlot)[4]='Carpool/Vanpool'
names(ToPlot)[5]='Bicycled'
names(ToPlot)[6]='Other'



```




```{r}

#creating table to be used by ggplot
tableFreq=as.data.frame(ToPlot)
names(tableFreq)=c("access_mode","pct")
tableFreq0 = tableFreq[order(-tableFreq$pct),] #setup for allowing us to order


# preparing labels
ToPlot*100   #CAN YOU GET RID OF THIS???
ToPlot=ToPlot*100
paste0(round(ToPlot,2),'%')   #CAN YOU GET RID OF THIS???
plotLabels=paste0(round(ToPlot,2),'%')  # labels for the slices




```







```{r pieTitle_question, eval=FALSE}
#Making the Title of the Chart

titleText3='Biking to Link Stations vs. All Other Modes of Travel'
sourceText='Source: Sound Transit 2015 Onboard Survey Data'


# customizing set of colors
paletteHere=rainbow(length(ToPlot)) 

paletteHereNew=c('gray') # just one color

```



[Go to table of contents.](#part1)


############################PART 1: Lolliplot #####################




We could use our reference line to show gaps or differences. In this case, the **Lollipop** plot may be useful. This one is just a replacement for a bar plot:

```{r lolli_gg, eval=FALSE}

base = ggplot(tableFreq, aes(x=access_mode,pct)) 
lolliplot1=base + geom_segment(aes(y = 0, 
                                   x = access_mode, 
                                   yend = pct, 
                                   xend = access_mode), color = "grey50") 

lolliplot2 = lolliplot1 + geom_point()

lolliplot3 = lolliplot2 + labs(title=titleText2,
                     x ='Access Mode', 
                     y = '%',
                     caption = sourceText)

lolliplot4 = lolliplot3 + theme(panel.background = element_rect(fill = "white",
                                                    colour = "grey50"),
                    plot.caption = element_text(hjust = 0), # default was 1
                    plot.title = element_text(hjust = 0.5))


lolliplot4
```

You can get:
```{r lolli_ord_gg, eval=FALSE}
tableFreq[order(tableFreq$pct),]
# reordering DF steps:
tableFreqO=tableFreq[order(tableFreq$pct),]


base = ggplot(tableFreqO, aes(access_mode,pct)) 
lolliplot1=base + geom_segment(aes(y = 0, 
                                   x = access_mode, 
                                   yend = pct, 
                                   xend = access_mode), color = "gray") 
lolliplot2 = lolliplot1 + geom_point()
lolliplot2 + scale_x_discrete(limits=tableFreqO$access_mode) # key element



```

And, what about changing the axis values so that we can identify the gaps:

```{r lolli_axis_gg, eval=FALSE}
####### new variable
tableFreqO$gap=tableFreqO$pct-1.57
#########


# plot the new variable
base = ggplot(tableFreqO, aes(access_mode,gap)) 

lolliplot1=base + geom_segment(aes(y = 0, 
                                   x = access_mode, 
                                   yend = gap, 
                                   xend = access_mode), color = "gray") 
lolliplot2 = lolliplot1 + geom_point()
lolliplot2 + scale_x_discrete(limits=tableFreqO$access_mode) # key element

```

Maybe add some color:
```{r lolli_gg_color, eval=FALSE}
# a new column for color
tableFreqO$PositiveGap=ifelse(tableFreqO$gap>0,T,F)

# add new aesthetics 'color'
base = ggplot(tableFreqO, aes(access_mode,gap,
                              color=PositiveGap)) #change
lolliplot1=base + geom_segment(aes(y = 0, 
                                   x = access_mode, 
                                   yend = gap, 
                                   xend = access_mode), color = "gray") 
lolliplot2 = lolliplot1 + geom_point()
lolliplot2 + scale_x_discrete(limits=tableFreqO$access_mode) # key element
```

Maybe add some extra info:
```{r lolli_annot_gg, eval=FALSE}
# a new column for color
tableFreqO$PositiveGap=ifelse(tableFreqO$gap>0,T,F)

base = ggplot(tableFreqO, aes(access_mode,gap,color=PositiveGap,
                              label = round(gap,3))) #  change
lolliplot1=base + geom_segment(aes(y = 0, 
                                   x = access_mode, 
                                   yend = gap, 
                                   xend = access_mode), color = "gray") 
lolliplot2=lolliplot1 + geom_point() 
lolliplot3= lolliplot2 + scale_x_discrete(limits=tableFreqO$access_mode) 
# annotating and moving the text on the horizontal
lolliplot3 + geom_text(nudge_x=0.3) 

```

You can avoid the overlaping symbols in the legend by using:
```{r nudge_gg, eval=FALSE}
lolliplot3 + geom_text(nudge_x=0.3,show.legend = FALSE) 
```

<span style="color:red"> Exercise:<br>Complete adding the elements missing in the last plot. </span>




[Go to table of contents.](#part1)














_____
[Go to table of contents.](#part1)

[Back to course schedule menu](https://evansdatascience.github.io/VisualAnalytics/)
